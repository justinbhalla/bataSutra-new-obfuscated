!function(){"use strict";var e="1WN8151jGQjqbfO0Aj2tK-79yJ9gCD_z0DLCdxs_higg",t="Headlines",n="A:C",r="https://docs.google.com/spreadsheets/d/"+e+"/gviz/tq?tqx=out:csv&sheet="+encodeURIComponent(t)+"&range="+encodeURIComponent(n);!function(){try{var e=document.createElement("link");e.rel="prefetch",e.as="fetch",e.crossOrigin="anonymous",e.href=r,document.head.appendChild(e)}catch(e){}}();function o(e){for(var t=[],n=[],r="",o=!1,c=0;c<e.length;c++){var i=e[c];if(o)'"'!==i?r+=i:'"'===e[c+1]?(r+='"',c++):o=!1;else if('"'===i)o=!0;else if(","===i)n.push(r),r="";else if("\n"===i)n.push(r),t.push(n),n=[],r="";else"\r"!==i&&(r+=i)}return(r.length||n.length)&&(n.push(r),t.push(n)),t}function c(e,t){return new Promise(function(n,o){var c="AbortController"in window?new AbortController:null,i=setTimeout(function(){try{null==c||c.abort()}catch(e){}o(new Error("timeout"))},t||900);fetch(e,{signal:null==c?void 0:c.signal,cache:"force-cache",credentials:"omit"}).then(function(e){clearTimeout(i),n(e)}).catch(function(e){clearTimeout(i),o(e)})})}function i(e,t){var n=((t||[]).join(" â€¢ ").length||120)/1.8|0;n=Math.min(140,Math.max(60,n)),e.style.setProperty("--dur",n+"s")}function a(e,t,n){if(e&&Array.isArray(t)&&t.length){e.className="ticker "+("right"===n?"ticker-right":"ticker-left")+" "+("botTicker"===e.id?"text-sm text-slate-700":"text-sm font-medium"),e.innerHTML="";for(var r=t.concat(t),o=0;o<r.length;o++){var c=document.createElement("span");c.textContent=r[o],e.appendChild(c)}i(e,t)}}function s(e){if(e){var t=e.filter(function(e){return"top"===e.section}).map(function(e){return e.text}),n=e.filter(function(e){return"bottom"===e.section}).map(function(e){return e.text});a(document.getElementById("topTicker"),t,"right"),a(document.getElementById("botTicker"),n,"left")}}var l="bs_headlines_ethics_v1",u=9e5;function d(){try{var e=localStorage.getItem(l);if(!e)return null;var t=JSON.parse(e),n=t.ts,r=t.data;return Date.now()-n>u?null:r}catch(e){return null}}function f(e){try{localStorage.setItem(l,JSON.stringify({ts:Date.now(),data:e}))}catch(e){}}async function p(){try{var e=await c(r,900);if(!e.ok)throw new Error("HTTP "+e.status);var t=await e.text();if(t.trim().startsWith("<"))return[];var n=o(t);if(!n.length)return[];var c=n[0].map(function(e){return e.replace(/^\uFEFF/,"").trim().toLowerCase()}),i=c.indexOf("section"),a=c.indexOf("text");return i<0||a<0?[]:n.slice(1).map(function(e){return{section:(e[i]||"").toLowerCase().trim(),text:(e[a]||"").trim()}}).filter(function(e){return e.text})}catch(e){return console.warn("Headlines fetch failed:",e&&e.message||e),null}}function h(){try{window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.querySelectorAll(".ticker-left, .ticker-right").forEach(function(e){e.style.animation="none"})}catch(e){}}function m(){var e=document.getElementById("year");e&&(e.textContent=String((new Date).getFullYear()))}async function y(){m(),h();var e=d();e&&s(e);var t=await p();t&&(f(t),s(t))}document.addEventListener("DOMContentLoaded",y,{once:!0})}();
