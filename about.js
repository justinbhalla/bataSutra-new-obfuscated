!function(){"use strict";var e="1WN8151jGQjqbfO0Aj2tK-79yJ9gCD_z0DLCdxs_higg";function t(t,n){return"https://docs.google.com/spreadsheets/d/"+e+"/gviz/tq?tqx=out:csv&sheet="+encodeURIComponent(t)+"&range="+encodeURIComponent(n)}function n(e){for(var t=[],n=[],r="",o=!1,i=0;i<e.length;i++){var a=e[i];if(o)'"'!==a?r+=a:'"'===e[i+1]?(r+='"',i++):o=!1;else if('"'===a)o=!0;else if(","===a)n.push(r),r="";else if("\n"===a)n.push(r),t.push(n),n=[],r="";else"\r"!==a&&(r+=a)}return(r.length||n.length)&&(n.push(r),t.push(n)),t}var r="bs_headlines_v3_methodology",o=9e5;function i(){try{var e=localStorage.getItem(r);if(!e)return null;var t=JSON.parse(e);return Date.now()-t.ts>o?null:t.data}catch(e){return null}}function a(e){try{localStorage.setItem(r,JSON.stringify({ts:Date.now(),data:e}))}catch(e){}}function s(e,n){return n=n||900,new Promise(function(r,o){var i="AbortController"in window?new AbortController:null,a=setTimeout(function(){try{i&&i.abort()}catch(e){}o(new Error("timeout"))},n);fetch(e,{signal:i?i.signal:void 0,cache:"force-cache",credentials:"omit"}).then(function(e){clearTimeout(a),r(e)}).catch(function(e){clearTimeout(a),o(e)})})}function l(){return s(t("Headlines","A:C"),1e3).then(function(e){if(!e.ok)throw new Error("HTTP "+e.status);return e.text()}).then(function(e){if((e||"").trim().startsWith("<"))return[];var t=n(e);if(!t.length)return[];var r=t[0].map(function(e){return e.replace(/^\uFEFF/,"").trim().toLowerCase()}),o=r.indexOf("section"),i=r.indexOf("text");return o<0||i<0?[]:t.slice(1).map(function(e){return{section:(e[o]||"").toLowerCase().trim(),text:(e[i]||"").trim()}}).filter(function(e){return e.text})}).catch(function(){return null})}function c(e,t){try{var n=((t||[]).join(" â€¢ ").length)||120,r=Math.min(140,Math.max(60,Math.round(n/1.8)));e.style.setProperty("--dur",r+"s")}catch(e){}}function d(e,t,n){if(!e||!t||!t.length)return;e.className="ticker "+("right"===n?"ticker-right":"ticker-left")+" "+("botTicker"===e.id?"text-sm text-slate-700":"text-sm font-medium"),e.innerHTML="";for(var r=t.concat(t),o=0;o<r.length;o++){var i=document.createElement("span");i.textContent=r[o],e.appendChild(i)}c(e,t)}function u(e){if(!e)return;for(var t=[],n=[],r=0;r<e.length;r++)"top"===e[r].section?t.push(e[r].text):"bottom"===e[r].section&&n.push(e[r].text);var o=document.getElementById("topTicker"),i=document.getElementById("botTicker");t.length&&d(o,t,"right"),n.length&&d(i,n,"left")}function f(){var e=document.getElementById("year");e&&(e.textContent=(new Date).getFullYear().toString())}function m(){try{if(window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches){for(var e=document.querySelectorAll(".ticker-left, .ticker-right"),t=0;t<e.length;t++)e[t].style.animation="none"}}catch(e){}}function p(){f(),m();var e=i();e&&u(e),l().then(function(e){e&&(a(e),u(e))}),setInterval(function(){l().then(function(e){e&&(a(e),u(e))})},3e5),document.addEventListener("visibilitychange",function(){document.hidden||l().then(function(e){e&&(a(e),u(e))})},{passive:!0})}document.addEventListener("DOMContentLoaded",p,{once:!0,passive:!0});}();
